<!-- Footer -->
<footer th:fragment="footer" class="bg-dark text-white pt-5 pb-4 mt-auto">
    <div class="container">
        <div class="row">
            <!-- About Us Section -->
            <div class="col-md-3 col-sm-6 footer-widget mb-4">
                <h3>ABOUT US</h3>
                <p>We are an ecommerce platform dedicated to provide high quality products with exceptional customer service.</p>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="/" class="text-decoration-none text-white">Home</a></li>
                    <li class="mb-2"><a href="/contact" class="text-decoration-none text-white">Contact Us</a></li>
                </ul>
            </div>
            
            <!-- Quick Links Section -->
            <div class="col-md-3 col-sm-6 footer-widget mb-4">
                <h3>QUICK LINKS</h3>
                <div class="social-icons mb-3">
                    <a href="https://facebook.com" target="_blank" class="social-icon me-3">
                        <i class="fab fa-facebook-f fa-lg"></i>
                    </a>
                    <a href="https://tiktok.com" target="_blank" class="social-icon me-3">
                        <i class="fab fa-tiktok fa-lg"></i>
                    </a>
                    <a href="https://instagram.com" target="_blank" class="social-icon me-3">
                        <i class="fab fa-instagram fa-lg"></i>
                    </a>
                    <a href="https://pinterest.com" target="_blank" class="social-icon me-3">
                        <i class="fab fa-pinterest fa-lg"></i>
                    </a>
                    <a href="https://linkedin.com" target="_blank" class="social-icon me-3">
                        <i class="fab fa-linkedin-in fa-lg"></i>
                    </a>
                    <a href="https://youtube.com" target="_blank" class="social-icon">
                        <i class="fab fa-youtube fa-lg"></i>
                    </a>
                </div>
            </div>
            
            <!-- Account Section - Modified to redirect to login when not authenticated -->
            <div class="col-md-3 col-sm-6 footer-widget mb-4">
                <h3>MY ACCOUNT</h3>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a th:href="${session.loggedInUser != null} ? '/user/profile' : '/login'" class="text-decoration-none text-white">My Profile</a>
                    </li>
                    <li class="mb-2">
                        <a th:href="${session.loggedInUser != null} ? '/cart/view' : '/login'" class="text-decoration-none text-white">My Cart</a>
                    </li>
                </ul>
            </div>
            
            <!-- Contact Info Section -->
            <div class="col-md-3 col-sm-6 footer-widget mb-4">
                <h3>CONTACT INFO</h3>
                <ul class="list-unstyled">
                    <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> 123 Street, City, Country</li>
                    <li class="mb-2"><i class="fas fa-phone-alt me-2"></i> (123) 456-7890</li>
                    <li class="mb-2"><i class="fas fa-envelope me-2"></i> info@example.com</li>
                    <li class="mb-2"><i class="fas fa-clock me-2"></i> Mon-Fri: 9AM to 5PM</li>
                </ul>
            </div>
        </div>
        
        <!-- Copyright and Payment Section -->
        <div class="row mt-4 pt-3 border-top">
            <div class="col-md-6 text-center text-md-start">
                <p class="mb-md-0">Â© 2023 Your Company. All rights reserved.</p>
            </div>
            <div class="col-md-6 text-center text-md-end payment-methods">
                <img src="/images/payment/visa.png" alt="Visa" class="me-4" width="50">
                <img src="/images/payment/paypal.png" alt="PayPal" width="80">
            </div>
        </div>
    </div>
    
    <!-- Optional JavaScript Libraries -->
    <div th:fragment="scripts">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="/js/main.js"></script>
    </div>
</footer>

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }
    
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        position: relative;
    }
    
    .main-content, main, .flex-grow-1 {
        flex: 1 0 auto;
    }
    
    footer {
        flex-shrink: 0;
        width: 100%;
        position: relative;
        bottom: 0;
        left: 0;
        right: 0;
        margin-top: 0;
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: 0;
    }
    
    .footer h3:after {
        content: '';
        position: absolute;
        left: 0;
        bottom: 0;
        width: 50px;
        height: 2px;
        background-color: #4CAF50;
    }
    
    /* iPad Air specific adjustments */
    @media (min-width: 768px) and (max-width: 834px) {
        /* General font size increase */
        body {
            font-size: 16px;
        }
        
        /* Headings larger on iPad */
        h1 {
            font-size: 2.5rem !important;
        }
        
        h2 {
            font-size: 2.2rem !important;
        }
        
        h3 {
            font-size: 1.8rem !important;
        }
        
        /* Larger buttons */
        .btn {
            padding: 0.6rem 1.2rem;
            font-size: 1.1rem;
        }
        
        /* Larger form elements */
        input, select, textarea {
            font-size: 1.1rem !important;
            padding: 0.7rem !important;
        }
        
        .form-control-lg {
            font-size: 1.2rem !important;
        }
        
        /* Larger table text */
        table {
            font-size: 1.1rem;
        }
        
        /* Larger footer text */
        footer {
            font-size: 1.1rem;
        }
        
        footer h3 {
            font-size: 1.5rem !important;
        }
        
        /* Larger card elements */
        .card-body {
            padding: 1.5rem !important;
        }
        
        /* Fix footer display */
        html {
            height: -webkit-fill-available;
        }
        
        body {
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        
        footer {
            position: relative;
            bottom: 0;
            width: 100%;
        }
        
        /* Larger navbar elements */
        .navbar-brand {
            font-size: 1.8rem !important;
        }
        
        .nav-link {
            font-size: 1.1rem !important;
            padding: 0.5rem 0.8rem !important;
        }
        
        /* Larger icons */
        .fa, .fas, .far, .fab {
            font-size: 1.3em;
        }
        
        /* Larger breadcrumb */
        .breadcrumb {
            font-size: 1.1rem;
        }
        
        /* Fix common layout issues */
        .container {
            padding-left: 20px;
            padding-right: 20px;
        }
    }
    
    /* Fix for Safari */
    @supports (-webkit-touch-callout: none) {
        body, html {
            height: -webkit-fill-available;
        }
    }
</style>

<script>
    // Global footer positioning script
    document.addEventListener('DOMContentLoaded', function() {
        function fixFooter() {
            // Force page to be at least as tall as viewport
            document.body.style.minHeight = window.innerHeight + 'px';
            
            // Get elements
            const footer = document.querySelector('footer');
            const html = document.documentElement;
            
            // Calculate the document height and viewport height
            const windowHeight = window.innerHeight;
            const bodyHeight = Math.max(
                document.body.scrollHeight,
                document.body.offsetHeight,
                html.clientHeight,
                html.scrollHeight,
                html.offsetHeight
            );
            
            // Ensure no space below footer
            if (footer) {
                if (bodyHeight <= windowHeight) {
                    // If content is shorter than viewport, push footer to bottom
                    footer.style.position = 'absolute';
                    footer.style.bottom = '0';
                    footer.style.width = '100%';
                    document.body.style.paddingBottom = footer.offsetHeight + 'px';
                } else {
                    // If content exceeds viewport, use normal flow
                    footer.style.position = 'relative';
                    document.body.style.paddingBottom = '0';
                }
            }
        }
        
        // Run on page load and resize
        fixFooter();
        window.addEventListener('resize', fixFooter);
        window.addEventListener('load', fixFooter);
        window.addEventListener('orientationchange', fixFooter);
        
        // Check content changes
        const observer = new MutationObserver(fixFooter);
        observer.observe(document.body, { childList: true, subtree: true });
        
        // Extra check for iPad
        if (window.innerWidth >= 768 && window.innerWidth <= 834) {
            setInterval(fixFooter, 500);
        }
        
        // After images load, check again
        window.addEventListener('load', function() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (img.complete) {
                    fixFooter();
                } else {
                    img.addEventListener('load', fixFooter);
                }
            });
        });
    });
</script>

